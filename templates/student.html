{% extends 'base.html' %}

{% block content %}
<style>
    body{
    color: #1a202c;
    text-align: left;
    background-color: #e5e5e5;    
}
.main-body {
    padding:15px;
}
.card {
    box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);
}

.card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 0 solid rgba(0,0,0,.125);
    border-radius: .25rem;
}

.card-body {
    flex: 1 1 auto;
    min-height: 1px;
    padding: 1rem;
}

.gutters-sm {
    margin-right: -1px;
    margin-left: -9px;
}

.gutters-sm>.col, .gutters-sm>[class*=col-] {
    padding-right: 8px;
    padding-left: 8px;
}
.mb-3, .my-3 {
    margin-bottom: 1rem!important;
}

.bg-gray-300 {
    background-color: #e2e8f0;
}
.h-100 {
    height: 100%!important;
}
.shadow-none {
    box-shadow: none!important;
}

#arrowback{
    margin-left: 25px;
    font-size: 25px;
    color: black;

}
</style>

{% for message in get_flashed_messages() %}
	<div class="alert alert-success alert-dismissible fade show" role="alert">
	  {{ message }}
	  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
{% endfor %}
<a href="#" id="arrowback" onclick="history.back()"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H6M12 5l-7 7 7 7"/></svg></a>

<div class="container">
    <div class="main-body">
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                    <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
                    <div class="mt-3">
                      <h4>{{student.first_name|capitalize}} {{student.last_name|capitalize}}</h4>
                      <p class="text-secondary mb-1">{{student.field_of_study}}</p>
                      <p class="text-muted font-size-sm">{{student.form_of_study}}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-3">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap"> 
                        <span class="with-icon--before">
                            <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                            </svg> Phone</h6>
                        </span>   
                    <span class="text-secondary">{{student.phone_number}}</span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>  Email</h6>
                    <span class="text-secondary">{{student.email}}</span>
                  </li>
                  
                </ul>
              </div>
            </div>
            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Full Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{student.first_name|capitalize}} {{student.second_name|capitalize}} {{student.last_name|capitalize}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Personal ID Number</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{student.personal_id_number}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Address</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{student.address1}} {{student.address2}}, {{student.city}} {{student.zip_code}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Date Of Birth</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      25.09.2004
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Field Of Study</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{student.field_of_study}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Form Of Study</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{student.form_of_study}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-12">
                      <button style="margin: -8px" class="btn btn-info btn" data-bs-toggle="modal" data-bs-target="#editModal">Edit</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
<button type="button" class=" btn btn-danger" style="margin-top: 50px" id="" data-bs-toggle="modal" data-bs-target="#deleteModal"> Delete Student</button>
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="font-weight: bold">
            <h4>Dangerous Action</h4>
          </div>
            <div class="modal-body">
              Are you sure you want to delete student {{student.first_name}} {{student.last_name}}?</br>
              This action is irreversible!
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style="font-weight: bold">
          <h4>Edit Student Details</h4>
        </div>
          <div class="modal-body">
            <form action="/student/{{student.student_id}}" method="POST">
              {{ form.hidden_tag()}}
              {{ form.first_name.label(
                  class="form-label")}}
              {{ form.first_name(
                  class="form-control", value=student.first_name)}}
                  <br/>
                  {{ form.second_name.label(
                      class="form-label")}}
                  {{ form.second_name(
                      class="form-control", value=student.second_name)}}
              <br/>
              {{ form.last_name.label(
                  class="form-label")}}
              {{ form.last_name(
                  class="form-control", value=student.last_name)}}
                  <br/>
                  {{ form.csrf_token }}
                  {{ form.form_of_study.label(
                      class="form-label")}}
                      {{ form.form_of_study(
                      class="form-control", value=student.form_of_study)}}
                      <br/>
                      {{ form.field_of_study.label(
                          class="form-label")}}
                          {{ form.field_of_study(
                          class="form-control")}}
              <br/>
              {{ form.personal_id_number.label(
                  class="form-label")}}
              {{ form.personal_id_number(
                  class="form-control", value=student.personal_id_number)}}
              <br/>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                {{ form.submit(class ="btn btn-info") }}
            </div>
              
          </div>
          
      </div>
  </div>
</div>
        

<script>
  var form_select = document.getElementById("form_of_study");
  var field_select = document.getElementById("field_of_study");
 
         form_select.onchange = function()  {
              
             form = form_select.value;
             
             fetch('/field/' + form).then(function(response) {
 
                 response.json().then(function(data) {
                     var optionHTML = '';
                     for (var field of data.fields) {
                         optionHTML += '<option value="' + field.field + '">' + field.name + '</option>';
                     }
 
                     field_select.innerHTML = optionHTML;
                 })
                 
             });
         }
 
 </script>


{% endblock %}  