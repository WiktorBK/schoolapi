{% extends 'base.html' %}

{% block content %}
<style>
    svg{
        transition: 0.2s;
    }
    svg:hover{
        stroke-width: 2.5;
}
</style>
{% for message in get_flashed_messages() %}
	
	<div class="alert alert-success alert-dismissible fade show" role="alert">
	  {{ message }}
	  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
{% endfor %}
<button type="button" class="btn btn-dark" onclick="history.back()">Back</button>
<br/>
<br/>

<br/>
<h1>Users</h1>
<br/>
<table class="table">
    <thead>
<tr>
    <th scope="col">First Name</th>
    <th scope="col">Last Name</th>
    <th scope="col">Email</th>
    <th scope="col">Role</th>

</tr>
    </thead>
<tbody class="tabl table-group-divider">
    {%for user in users%}
<tr>
<td WIDTH=200>{{user.name|capitalize}}</td>
<td WIDTH=200>{{user.surname|capitalize}}</td>
<td WIDTH=200>{{user.email}}</td>
<td WIDTH=200>{{user.role|capitalize}}</td>
<td WIDTH=50><a href="#" data-bs-toggle="modal" data-bs-target="#deleteModal"><svg xmlns="http://www.w3.org/2000/svg" style="margin-right:8px" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg></a>
    <a onclick="deleteUser('{{user.user_id}}')"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></a>
</td>
</tr>

{%endfor%}
</tbody>
</table>
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="font-weight: bold">
            <h4>Edit User Permissions</h4>
          </div>
            <div class="modal-body">
              <form action="#" method="POST">
                {{ form.hidden_tag()}}
                {{ form.role.label(
                    class="form-label")}}
                {{ form.role(
                    class="form-control")}}
                <br/>
                <div class="modal-footer" style="padding-bottom: 0px;">
                    {{ form.submit(class ="btn btn-primary") }}
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
                
            </div>
            
        </div>
    </div>
  </div>


  <script>
  function deleteUser(user_id) {
    fetch('/delete/' + user_id).then(function(response) {
 
    response.json().then(function(data) { 
 })
});


}
  </script>
{% endblock %}  